name: Repeat CI Bot

on:
  issue_comment:
    types: [created]

jobs:
  repeat:
    if: >
      contains(github.event.comment.body, '@haobot-ci') &&
      github.event.comment.user.login != 'haobot' # ⛔ 防止 bot 自己触发循环
    runs-on: ubuntu-latest

    steps:
      - name: Echo with mention
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: ${{ github.event.issue.number }}
          token: ${{ secrets.BOT_PAT }}
          body: |
            👋 @${{ github.event.comment.user.login }}
            > ${{ github.event.comment.body }}
